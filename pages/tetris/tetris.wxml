<view class="container">
  <!-- 游戏信息栏 -->
  <view class="game-info">
    <view class="info-item">
      <text class="info-label">得分</text>
      <text class="info-value">{{score}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">等级</text>
      <text class="info-value">{{level}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">行数</text>
      <text class="info-value">{{lines}}</text>
    </view>
  </view>

  <!-- 游戏区域 -->
  <view class="game-area">
    <!-- 下一个方块预览 -->
    <view class="next-piece">
      <text class="next-title">下一个</text>
      <view class="next-grid">
        <view class="next-row" wx:for="{{nextPieceGrid}}" wx:key="index">
          <view 
            class="next-cell {{item ? 'filled' : ''}}" 
            wx:for="{{item}}" 
            wx:key="cellIndex"
          ></view>
        </view>
      </view>
    </view>

    <!-- 主游戏网格 -->
    <view class="tetris-grid">
      <view class="grid-row" wx:for="{{gameGrid}}" wx:key="rowIndex" wx:for-index="rowIndex">
        <view 
          class="grid-cell {{item.cellClass}}" 
          wx:for="{{item}}" 
          wx:key="colIndex" 
          wx:for-index="colIndex"
        ></view>
      </view>
    </view>
  </view>

  <!-- 控制按钮 -->
  <view class="controls">
    <view class="control-row">
      <button class="control-btn rotate-btn" bindtap="rotatePiece">🔄</button>
      <button class="control-btn drop-btn" bindtap="hardDrop">⬇️</button>
      <button class="control-btn pause-btn" bindtap="togglePause">
        {{isPaused ? '▶️' : '⏸️'}}
      </button>
    </view>
    
    <view class="control-row">
      <button class="control-btn move-btn" bindtap="movePiece" data-direction="left">⬅️</button>
      <button class="control-btn move-btn" bindtap="movePiece" data-direction="down">⬇️</button>
      <button class="control-btn move-btn" bindtap="movePiece" data-direction="right">➡️</button>
    </view>
  </view>

  <!-- 游戏控制面板 -->
  <view class="game-controls">
    <button class="game-btn start-btn" bindtap="startGame" wx:if="{{!gameStarted}}">开始游戏</button>
    <button class="game-btn restart-btn" bindtap="restartGame" wx:if="{{gameStarted}}">重新开始</button>
  </view>

  <!-- 游戏结束弹窗 -->
  <view class="modal" wx:if="{{showGameOverModal}}">
    <view class="modal-content">
      <text class="modal-title">🎮 游戏结束</text>
      <text class="modal-text">最终得分: {{score}}</text>
      <text class="modal-text">消除行数: {{lines}}</text>
      <text class="modal-text">达到等级: {{level}}</text>
      <button class="modal-btn" bindtap="restartGame">再来一局</button>
      <button class="modal-btn secondary" bindtap="goHome">返回主页</button>
    </view>
  </view>

  <!-- 暂停遮罩 -->
  <view class="pause-overlay" wx:if="{{isPaused && gameStarted}}" bindtap="togglePause">
    <view class="pause-content" catchtap="stopPropagation">
      <text class="pause-text">游戏暂停</text>
      <text class="pause-hint">点击屏幕或继续按钮恢复游戏</text>
      <button class="resume-btn" catchtap="togglePause">继续游戏</button>
    </view>
  </view>
</view>